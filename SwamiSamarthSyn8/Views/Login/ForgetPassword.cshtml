@model SwamiSamarthSyn8.Models.Userdetails
@{
    ViewBag.Title = "Forgot Password";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="forgot-wrapper d-flex align-items-center justify-content-center">
    <div class="forgot-card text-center p-4 shadow-sm rounded">

        <img src="\Images\Shripad LOGO.png" alt="Logo" class="mb-4 login-logo" style="height: 85px" />


        <!-- Title -->
        <h4 class="fw-bold mb-2">Forgot Password</h4>
        <p class="text-muted mb-3">Enter your email and we'll send you a link to reset your password.</p>

        <!-- Form -->
        <div class="form-group mb-3 d-flex justify-content-center">
            @Html.TextBoxFor(model => model.Email, new { @class = "form-control text-center", placeholder = "Enter your email", @id = "email", style = "max-width: 280px;" })
        </div>


        <!-- Error/Success Message -->
        <div class="message text-start mb-2"></div>

        <!-- Submit button -->
        <div class="d-grid mb-3">
            <button type="submit" class="btn submit-btn" id="submitButton">Submit</button>
        </div>

        <!-- Back to login -->
        <div class="mb-2 text-center">
            <a href="@Url.Action("Login", "Login")" class="back-link">
                <i class="fa fa-arrow-left"></i> Back to Login
            </a>
        </div>

        <style>
            .back-link {
                font-size: 14px;
                color: #007bff !important;
                text-decoration: none;
                font-weight: 500;
            }

                .back-link:hover {
                    text-decoration: underline;
                    color: #007bff; /* Blue on hover */
                }
        </style>

    </div>
</div>

<style>
    /* body {
        background-color: #f4f7fc;
        font-family: 'Segoe UI', Arial, sans-serif;
    }*/

    .forgot-card {
        background: #e0e0e0;
        max-width: 400px;
        width: 100%;
        border-radius: 12px;
    }

    .form-control {
        border-radius: 6px;
        height: 45px;
    }

        .form-control:focus {
            box-shadow: none;
            border-color: #4e73df;
        }

    .submit-btn {
        background-color: #28a745;
        color: #fff;
        border: none;
        padding: 12px;
        font-weight: 600;
        border-radius: 6px;
    }

        .submit-btn:hover {
            background-color: #218838;
        }

    .icon-box {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .message {
        font-size: 14px;
    }
</style>

@section scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#submitButton").click(function (e) {
                e.preventDefault();
                var email = $("#email").val().trim();
                var messageBox = $(".message");

                if (!email) {
                    messageBox.text("⚠ Please enter your email.").css("color", "red");
                    return;
                }

                $.ajax({
                    url: '/Login/ForgetPassword',
                    type: 'POST',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    data: JSON.stringify({ Email: email }),
                    success: function (response) {
                        if (response.success) {
                            messageBox.text(response.message).css("color", "blue");
                        } else {
                            messageBox.text(response.error).css("color", "red");
                        }
                    },
                    error: function (xhr) {
                        messageBox.text("An error occurred: " + xhr.responseText).css("color", "red");
                    }
                });
            });
        });
    </script>
}
